---
/**
 * CategoryShowcaseCard
 * Lightweight home-page CTA card linking to a project category (technical / creative)
 * Replaces the heavier interactive showcase grid on the home page.
 * Accepts a representative project (already sorted via sortProjects) to surface
 * the highest-priority cover image for that category.
 */
interface Props {
  href: string;
  label: string; // e.g., 'Technical Projects'
  project?: any; // CollectionEntry<'projects'> | undefined
}
const { href, label, project } = Astro.props as Props;
const p = project?.data;
---
<a href={href} class="category-cta group" aria-label={label}>
  <div class="media-wrapper">
    {p?.cover ? (
      <img src={p.cover} alt={p.coverAlt || p.title} loading="lazy" decoding="async" sizes="(max-width: 900px) 100vw, 520px" />
    ) : (
      <div class="placeholder" aria-hidden="true">
        <span class="placeholder-text">{label}</span>
      </div>
    )}
    <div class="scrim" />
    <div class="content">
      <h3 class="title heading-display">{label}</h3>
      {p && <p class="subtitle">Featuring: {p.title}</p>}
      <span class="cta inline-flex items-center gap-1">Explore <span aria-hidden>â†’</span></span>
    </div>
  </div>
</a>

<style>
  .category-cta { position:relative; display:block; text-decoration:none; border-radius:1.4rem; overflow:hidden; background:var(--color-surface, #f1f5f9); border:1px solid rgba(0,0,0,0.05); isolation:isolate; }
  .media-wrapper { position:relative; aspect-ratio:5/4; display:flex; align-items:center; justify-content:center; }
  .media-wrapper img { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; transition:transform 1.2s cubic-bezier(.19,1,.22,1), filter .4s; }
  .group:hover .media-wrapper img { transform:scale(1.05); }
  .placeholder { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-size:0.9rem; font-weight:600; letter-spacing:.06em; text-transform:uppercase; color:#475569; background:linear-gradient(135deg,#e2e8f0,#f8fafc); }
  .scrim { position:absolute; inset:0; background:linear-gradient(to top, rgba(0,0,0,.65), rgba(0,0,0,.15) 60%, rgba(0,0,0,0)); z-index:1; }
  .content { position:absolute; inset:0; z-index:2; display:flex; flex-direction:column; justify-content:flex-end; padding:1.2rem 1.35rem; gap:.55rem; }
  .title { margin:0; font-size:clamp(1.35rem,1rem + 1.2vw,2rem); line-height:1.05; color:#fff; text-shadow:0 4px 14px rgba(0,0,0,.45); }
  .subtitle { margin:0; font-size:.7rem; letter-spacing:.08em; text-transform:uppercase; color:#e2e8f0; opacity:.9; font-weight:600; }
  .cta { margin-top:.4rem; font-size:.65rem; font-weight:700; letter-spacing:.08em; text-transform:uppercase; background:rgba(255,255,255,0.15); color:#fff; padding:.5rem .85rem; border-radius:.7rem; backdrop-filter:blur(10px) saturate(160%); border:1px solid rgba(255,255,255,0.4); box-shadow:0 6px 20px -6px rgba(0,0,0,.4); }
  .group:hover .cta { background:linear-gradient(135deg, rgba(59,130,246,0.6), rgba(99,102,241,0.6)); }
  @media (max-width:899px) { .media-wrapper { aspect-ratio:4/3; } }
</style>
